<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MYTH SCANNER</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet"></script>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
    <style>
        :root { --p-color: #00f2ff; --e-color: #ff3c00; }
        body { font-family: 'DotGothic16', sans-serif; background: #000; color: #fff; margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        #header { height: 40px; background: #222; display: flex; justify-content: space-around; align-items: center; font-size: 0.75rem; border-bottom: 2px solid #444; }
        .char-area { height: 32%; display: flex; border-bottom: 1px solid #333; padding: 5px; box-sizing: border-box; }
        .cam-part { width: 40%; display: flex; align-items: center; justify-content: center; }
        .cam-frame { width: 100px; height: 100px; border: 2px solid #555; background: #111; overflow: hidden; position: relative; border-radius: 4px; }
        video { width: 100%; height: 100%; object-fit: cover; display: none; }
        .cam-active video { display: block; border-color: #0f0; }
        .info-part { width: 60%; display: flex; flex-direction: column; padding-left: 10px; justify-content: center; }
        .visual-card { width: 100%; height: 80px; border: 2px solid #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #111; position: relative; }
        .stat-text { font-size: 0.7rem; color: #ccc; margin-top: 3px; line-height: 1.2; }
        .hp-bar-bg { width: 100%; height: 8px; background: #333; border: 1px solid #fff; margin-top: 3px; }
        .hp-bar-fill { height: 100%; transition: width 0.3s; }
        #mid-ui { height: 140px; background: #111; border-top: 2px solid #444; display: flex; flex-direction: column; align-items: center; padding: 5px; }
        #msg { font-size: 0.7rem; color: #0f0; height: 35px; text-align: center; display: flex; align-items: center; padding: 0 10px; }
        .btn-row { display: flex; gap: 6px; width: 100%; flex-wrap: wrap; justify-content: center; }
        button { flex: 1; max-width: 100px; height: 38px; font-family: 'DotGothic16'; border: 2px solid #fff; color: #fff; background: #444; font-size: 0.75rem; cursor: pointer; }
        button:disabled { opacity: 0.3; cursor: default; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 100; display: none; flex-direction: column; align-items: center; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        #item-container { width: 100%; display: flex; flex-direction: column; gap: 8px; margin-bottom: 10px; }
        .item-list-btn { width: 100%; background: #222; border: 1px solid #555; color: #fff; padding: 10px; text-align: left; font-family: 'DotGothic16'; font-size: 0.85rem; line-height: 1.4; white-space: normal; word-break: break-all; min-height: 44px; }
        .close-btn-small { width: 120px !important; height: 32px !important; min-height: 32px !important; background: #444 !important; margin: 10px auto 0 auto !important; font-size: 0.75rem !important; flex: none !important; }
        .shake { animation: s 0.2s; }
        @keyframes s { 0%,100%{transform:translateX(0)} 25%{transform:translateX(5px)} 75%{transform:translateX(-5px)} }
        .elem-badge { position: absolute; bottom: 2px; right: 2px; font-size: 1rem; }
    </style>
</head>
<body>

<div id="header">
    <span>LV: <b id="p-lv">1</b> (+<b id="stat-boost">0</b>%)</span>
    <button onclick="showColl()" style="width:80px; height:25px; flex:none;">LIBRARY</button>
</div>

<div class="char-area" id="p-area">
    <div class="cam-part" id="p-cam-box"><div class="cam-frame"><video id="pv" autoplay playsinline muted></video></div></div>
    <div class="info-part">
        <div id="p-card" class="visual-card">
            <div id="p-rare" style="position:absolute; top:0; right:0; font-size:0.5rem; background:#fff; color:#000; padding:1px 4px;">-</div>
            <div id="p-sym" style="font-size:2rem;">‚ùì</div>
            <div id="p-name" style="font-size:0.6rem; text-align:center;">READY</div>
            <div id="p-elem" class="elem-badge"></div>
        </div>
        <div class="stat-text">HP: <span id="p-hp-cur">1000</span>/<span id="p-hp-max">1000</span><br>ATK: <span id="p-atk-val">0</span> DEF: <span id="p-def-val">0</span></div>
        <div class="hp-bar-bg"><div id="p-fill" class="hp-bar-fill" style="background:var(--p-color); width:100%"></div></div>
    </div>
</div>

<div id="mid-ui">
    <div id="msg">Ê≠¶Âô®„Çí„Çπ„Ç≠„É£„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ</div>
    <div class="btn-row">
        <button id="scan-btn" onclick="handleScan()" style="background:#0044cc">SCAN</button>
        <button id="atk-btn" onclick="handleAttack()" disabled style="background:#aa0000">ATTACK</button>
        <button id="item-open-btn" onclick="openItemMenu()" disabled style="background:#008844">ITEM</button>
    </div>
    <div id="inv-count" style="font-size:0.65rem; color:yellow; margin-top:8px;">INVENTORY: 0 / 5</div>
</div>

<div class="char-area" id="e-area">
    <div class="cam-part" id="e-cam-box"><div class="cam-frame"><video id="ev" autoplay playsinline muted></video></div></div>
    <div class="info-part">
        <div id="e-card" class="visual-card">
            <div id="e-rare" style="position:absolute; top:0; right:0; font-size:0.5rem; background:#fff; color:#000; padding:1px 4px;">-</div>
            <div id="e-sym" style="font-size:2rem;">‚ùì</div>
            <div id="e-name" style="font-size:0.6rem; text-align:center;">???</div>
            <div id="e-elem" class="elem-badge"></div>
        </div>
        <div class="stat-text">HP: <span id="e-hp-cur">0</span>/<span id="e-hp-max">0</span><br>ATK: <span id="e-atk-val">0</span> DEF: <span id="e-def-val">0</span></div>
        <div class="hp-bar-bg"><div id="e-fill" class="hp-bar-fill" style="background:var(--e-color); width:0%"></div></div>
    </div>
</div>

<div id="item-menu" class="overlay">
    <h2 id="item-menu-title" style="color:#0f0; margin-bottom:10px; font-size:1.2rem;">ITEMS</h2>
    <div id="item-container" style="width:100%; max-height:70vh; overflow-y:auto;"></div>
    <button class="close-btn-small" onclick="document.getElementById('item-menu').style.display='none'">CLOSE</button>
</div>

<div id="bonus-screen" class="overlay">
    <h2 style="color:gold;">BONUS SCAN</h2>
    <div class="cam-frame" style="width:160px; height:160px;" id="b-cam-box"><video id="bv" autoplay playsinline muted></video></div>
    <button id="bonus-btn" onclick="getBonusItem()" style="background:#0044cc; width:180px; margin-top:20px; color:#fff; border:2px solid #fff;">GET ITEM</button>
</div>

<div id="res-screen" class="overlay" style="justify-content:center;">
    <h1 id="res-title"></h1>
    <p id="res-msg" style="text-align:center; white-space: pre-wrap; margin:20px 0;"></p>
    <button onclick="closeResult()" style="width:200px; height:50px; background:#0044cc; color:#fff; border:2px solid #fff;">NEXT</button>
</div>

<div id="coll-screen" class="overlay">
    <h2 style="color:yellow; font-size:1rem;">LIBRARY</h2>
    <div id="w-coll" style="width:100%; background:#111; margin-bottom:10px; font-size:0.6rem; padding:5px; border:1px solid #444;"></div>
    <div id="m-coll" style="width:100%; background:#111; margin-bottom:10px; font-size:0.6rem; padding:5px; border:1px solid #444;"></div>
    <div id="i-coll" style="width:100%; background:#111; margin-bottom:10px; font-size:0.6rem; padding:5px; border:1px solid #444;"></div>
    <button class="close-btn-small" onclick="document.getElementById('coll-screen').style.display='none'">CLOSE</button>
</div>

<script>
    let net, mode = "W", lv = 1, exp = 0, nextExp = 100, php = 1000, pMax = 1000, ehp = 0, eMax = 0;
    let patk=0, pdef=0, eatk=0, edef=0, stream = null, currentMData = null, pendingItem = null;
    let pElem = "‚ö™", eElem = "‚ö™"; 

    let inventory = JSON.parse(localStorage.getItem('myth_inv_v8')) || [];
    let buffAtk = 0, buffDef = 0;
    let coll = JSON.parse(localStorage.getItem('myth_coll_v8')) || { weapons: {}, monsters: {}, items: {} };

    const naming = {
        W1: ["ÈâÑ","Èãº","Ëºù","È≠î","Èæç","Ê∞∑","ÁÇé","Èõ∑","ËÅñ","Á•û"],
        W2: ["„ÅÆÂâ£","„ÅÆÊñß","„ÅÆÊßç","„ÅÆÊùñ","„ÅÆÂºì","„ÅÆÈéå","„ÅÆÊßå","„ÅÆÂàÄ","„ÅÆÂ§ßÂâ£","„ÅÆÁü≠Ââ£"],
        M1: ["ÊØí","ÁÅ´","Ê∞¥","ÂΩ±","Á©∫","Ê£Æ","Èúä","Âè§","Áúü","ÊªÖ"],
        M2: ["„Çπ„É©„Ç§„É†","„Ç¶„É´„Éï","„Éâ„É©„Ç¥„É≥","„Çæ„É≥„Éì","„Ç¥„Éº„É¨„É†","„Éê„Éº„Éâ","„Éá„Éº„É¢„É≥","È®éÂ£´","Áéã","Á•û"],
        I: ["„Éù„Éº„Ç∑„Éß„É≥","ÁàÜÂºæ","Âäõ„ÅÆËñ¨","ÂÆà„Çä„ÅÆËñ¨","‰∏çÊÄùË≠∞„Å™Á≤â","Âè§„Å≥„ÅüÁì∂","ËÅñÊ∞¥","È≠îÂäõÁü≥","Âπ∏ÈÅã„ÅÆ„Ç≥„Ç§„É≥","„ÅäÂÆà„Çä"]
    };

    function judgeElement(name) {
        if (name.includes("ÁÇé") || name.includes("ÁÅ´") || name.includes("Èõ∑") || name.includes("Ëºù")) return "üî•";
        if (name.includes("Ê∞∑") || name.includes("Ê∞¥")) return "üíß";
        if (name.includes("Ê£Æ") || name.includes("ÊØí")) return "üåø";
        return "‚ö™";
    }

    async function init() {
        net = await mobilenet.load();
        switchCamera('P');
        updateUI();
    }

    async function stopCamera() {
        if(stream) { stream.getTracks().forEach(t => t.stop()); stream = null; }
        ['p-cam-box','e-cam-box','b-cam-box'].forEach(b=>document.getElementById(b).classList.remove('cam-active'));
    }

    async function switchCamera(target) {
        await stopCamera();
        try {
            stream = await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});
            const vId = {P:'pv', E:'ev', B:'bv'}[target];
            const bId = {P:'p-cam-box', E:'e-cam-box', B:'b-cam-box'}[target];
            document.getElementById(vId).srcObject = stream;
            document.getElementById(bId).classList.add('cam-active');
        } catch(e) { console.error("Camera Error"); }
    }

    async function handleScan() {
        const vid = mode === "W" ? document.getElementById('pv') : document.getElementById('ev');
        const r = await net.classify(vid);
        const seed = Math.floor((r[0].className.length * Date.now() * r[0].probability) % 1000);
        const rareIdx = seed % 100 < 70 ? 0 : seed % 100 < 90 ? 1 : seed % 100 < 98 ? 2 : 3;
        const rarity = ["COMMON","RARE","SUPER","MYTHIC"][rareIdx];
        const no = (seed % 100) + 1;
        const boost = 1 + (lv - 1) * 0.03;

        if (mode === "W") {
            const prefix = naming.W1[Math.floor((no-1)/10)];
            const name = prefix + naming.W2[(no-1)%10];
            patk = Math.floor(((rareIdx + 1) * 120 + (seed % 50)) * boost);
            pdef = Math.floor(((rareIdx + 1) * 60 + (seed % 30)) * boost);
            pElem = judgeElement(prefix);
            php = Math.min(pMax, php + Math.floor(pMax * 0.5));
            updateCard('p', rarity, "‚öîÔ∏è", `No.${no} ${rarity} ${name}`, "#444");
            document.getElementById('p-elem').innerText = pElem;
            coll.weapons[no] = {n:`${rarity} ${name}`, i:"‚öîÔ∏è"};
            mode = "M"; switchCamera('E');
            document.getElementById('msg').innerText = "„É¢„É≥„Çπ„Çø„Éº„Çí„Çπ„Ç≠„É£„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ";
        } else {
            const prefix = naming.M1[Math.floor((no-1)/10)];
            const name = prefix + naming.M2[(no-1)%10];
            eMax = Math.floor((800 + (rareIdx * 600) + (lv * 150))); 
            ehp = eMax;
            eatk = Math.floor((rareIdx + 1) * 100 + (lv * 10)); 
            edef = (rareIdx + 1) * 50;
            eElem = judgeElement(prefix);
            updateCard('e', rarity, "üëæ", `No.${no} ${rarity} ${name}`, "#a11");
            document.getElementById('e-elem').innerText = eElem;
            currentMData = {no, n:`${rarity} ${name}`, i:"üëæ"};
            await stopCamera();
            document.getElementById('atk-btn').disabled = false;
            document.getElementById('item-open-btn').disabled = false;
            document.getElementById('scan-btn').disabled = true;
            document.getElementById('msg').innerText = "BATTLE START!";
        }
        updateUI();
    }

    function updateCard(side, rare, sym, name, color) {
        const card = document.getElementById(`${side}-card`);
        card.style.background = color === "reset" ? "#111" : `radial-gradient(circle, ${color}ee, #000)`;
        document.getElementById(`${side}-rare`).innerText = rare;
        document.getElementById(`${side}-sym`).innerText = sym;
        document.getElementById(`${side}-name`).innerText = name;
        if(color === "reset") document.getElementById(`${side}-elem`).innerText = "";
    }

    function getElementBonus(atkElem, defElem) {
        if (atkElem === "‚ö™" || defElem === "‚ö™") return 1.0; 
        if ((atkElem === "üî•" && defElem === "üåø") || (atkElem === "üíß" && defElem === "üî•") || (atkElem === "üåø" && defElem === "üíß")) return 1.5;
        if ((atkElem === "üî•" && defElem === "üíß") || (atkElem === "üíß" && defElem === "üåø") || (atkElem === "üåø" && defElem === "üî•")) return 0.7;
        return 1.0;
    }

    function handleAttack() {
        document.getElementById('e-area').classList.add('shake');
        let baseDmg = Math.max(30, (patk + buffAtk) - Math.floor(edef/2));
        const eBonus = getElementBonus(pElem, eElem);
        baseDmg *= eBonus;
        let isCrit = Math.random() < 0.10;
        if (isCrit) baseDmg *= 2;
        ehp -= Math.floor(baseDmg);
        let log = isCrit ? "CRITICAL!! " : "";
        if(eBonus > 1.1) log += "Âº±ÁÇπ„ÇíÁ™Å„ÅÑ„ÅüÔºÅ";
        else if(eBonus < 0.9) log += "ËÄêÊÄß„Åå„ÅÇ„Çã...";
        document.getElementById('msg').innerText = log || "ÊîªÊíÉÔºÅ";
        setTimeout(() => {
            document.getElementById('e-area').classList.remove('shake');
            if(ehp <= 0) return showBonus();
            enemyTurn();
        }, 400);
        updateUI();
    }

    function enemyTurn() {
        document.getElementById('p-area').classList.add('shake');
        let baseDmg = Math.max(20, eatk - Math.floor((pdef + buffDef)/2));
        const eBonus = getElementBonus(eElem, pElem);
        baseDmg *= eBonus;
        php -= Math.floor(baseDmg);
        updateUI();
        setTimeout(() => {
            document.getElementById('p-area').classList.remove('shake');
            if(php <= 0) finish(false);
        }, 200);
    }

    function showBonus() { document.getElementById('bonus-screen').style.display = "flex"; switchCamera('B'); }
    async function getBonusItem() {
        const r = await net.classify(document.getElementById('bv'));
        const seed = Math.floor((Date.now() * r[0].probability) % 100);
        const no = seed + 1;
        const prefix = naming.I[Math.floor((no-1)/10)];
        const elem = judgeElement(prefix);
        let itm = { n: prefix, t: "TR", i: "üì¶", v: 0, no: no, e: elem };
        if (no <= 25) { itm = {...itm, n:`${prefix}(ÂõûÂæ©)`, t:"HE", i:"üß™", v:Math.floor(Math.random()*71)+30}; }
        else if (no <= 50) { itm = {...itm, n:`${prefix}(Â±ûÊÄß„ÉÄ„É°)`, t:"DM", i:"üí•", v:Math.floor(Math.random()*31)+15}; }
        else if (no <= 60) { itm = {...itm, n:`${prefix}(ÊîªÊíÉUP)`, t:"AT", i:"üíä", v:Math.floor(Math.random()*41)+20}; }
        else if (no <= 70) { itm = {...itm, n:`${prefix}(Èò≤Âæ°UP)`, t:"DF", i:"üõ°Ô∏è", v:Math.floor(Math.random()*41)+20}; }
        coll.items[no] = itm; save();
        if (inventory.length < 5) { inventory.push(itm); completeBonus(); }
        else { pendingItem = itm; showSwapMenu(); }
    }

    function showSwapMenu() {
        const container = document.getElementById('item-container');
        document.getElementById('item-menu-title').innerText = "ITEM SWAP";
        container.innerHTML = `<p style="color:orange; font-size:0.75rem; margin-bottom:10px;">„Å©„Çå„Å®ÂÖ•„ÇåÊõø„Åà„Åæ„Åô„ÅãÔºü</p>`;
        inventory.forEach((itm, index) => {
            const btn = document.createElement('button'); btn.className = "item-list-btn";
            btn.innerHTML = `ÂÖ•„ÇåÊõø„Åà„Çã: ${itm.i} ${itm.n}${itm.e !== "‚ö™" ? itm.e : ""}`;
            btn.onclick = () => { inventory[index] = pendingItem; completeBonus(); };
            container.appendChild(btn);
        });
        const skip = document.createElement('button');
        skip.className = "item-list-btn"; skip.style.background = "#444"; skip.innerHTML = `‚ùå Ë´¶„ÇÅ„Çã`;
        skip.onclick = completeBonus; container.appendChild(skip);
        document.getElementById('item-menu').style.display = "flex";
    }

    async function completeBonus() {
        pendingItem = null; await stopCamera();
        document.getElementById('item-menu').style.display = "none";
        document.getElementById('bonus-screen').style.display = "none";
        finish(true);
    }

    function openItemMenu() {
        const container = document.getElementById('item-container');
        document.getElementById('item-menu-title').innerText = "MY ITEMS";
        container.innerHTML = inventory.length === 0 ? "<p>„Ç¢„Ç§„ÉÜ„É†„Å™„Åó</p>" : "";
        inventory.forEach((itm, index) => {
            const btn = document.createElement('button'); btn.className = "item-list-btn";
            btn.innerHTML = `${itm.i} ${itm.n} ${itm.e !== "‚ö™" ? itm.e : ""}`;
            btn.onclick = () => useItem(index); container.appendChild(btn);
        });
        document.getElementById('item-menu').style.display = "flex";
    }

    function useItem(index) {
        const itm = inventory[index];
        let resText = "";
        if(itm.t === "HE") { const h = Math.floor(pMax * (itm.v/100)); php = Math.min(pMax, php+h); resText = `${h}ÂõûÂæ©`; }
        else if(itm.t === "DM") { 
            let d = Math.floor(eMax * (itm.v/100));
            const bonus = getElementBonus(itm.e, eElem);
            d = Math.floor(d * bonus); ehp -= d; resText = `${d}„ÉÄ„É°${bonus > 1 ? "(Âº±ÁÇπ!)" : ""}`;
        }
        else if(itm.t === "AT") { const u = Math.floor(patk * (itm.v/100)); buffAtk += u; resText = `ATK+${u}`; }
        else if(itm.t === "DF") { const u = Math.floor(pdef * (itm.v/100)); buffDef += u; resText = `DEF+${u}`; }
        document.getElementById('msg').innerText = `${itm.n}‰ΩøÁî®ÔºÅ${resText}`;
        inventory.splice(index, 1); document.getElementById('item-menu').style.display = "none";
        updateUI();
        if(ehp <= 0) setTimeout(showBonus, 600); else setTimeout(enemyTurn, 800);
    }

    function finish(win) {
        document.getElementById('res-screen').style.display = "flex";
        if(win) {
            document.getElementById('res-title').innerText = "VICTORY";
            if(currentMData) coll.monsters[currentMData.no] = currentMData;
            exp += 50;
            let lvLog = "ÁµåÈ®ìÂÄ§Áç≤ÂæóÔºÅ";
            if(exp >= nextExp) {
                lv++; exp = 0; nextExp += 50;
                pMax = Math.floor(1000 * (1 + (lv-1)*0.1));
                lvLog = `LEVEL UP! [LV:${lv}]\nÊúÄÂ§ßHP: ${pMax}`;
            }
            document.getElementById('res-msg').innerText = `Ë®é‰ºêÊàêÂäüÔºÅ\n${lvLog}`;
        } else {
            document.getElementById('res-title').innerText = "DEFEAT";
            lv = Math.max(1, lv - 5); inventory = [];
            pMax = Math.floor(1000 * (1 + (lv-1)*0.1)); php = pMax;
            document.getElementById('res-msg').innerText = `ÊïóÂåó... LV:${lv}„Å´‰Ωé‰∏ã„ÄÇ`;
        }
        localStorage.setItem('myth_inv_v8', JSON.stringify(inventory));
        save();
    }

    function closeResult() {
        document.getElementById('res-screen').style.display = "none";
        mode = "W"; buffAtk = 0; buffDef = 0; 
        currentMData = null; eatk = 0; edef = 0; ehp = 0; eMax = 0;
        pElem = "‚ö™"; eElem = "‚ö™";
        updateCard('p', "-", "‚ùì", "READY", "reset");
        updateCard('e', "-", "‚ùì", "???", "reset");
        document.getElementById('atk-btn').disabled = true;
        document.getElementById('item-open-btn').disabled = true;
        document.getElementById('scan-btn').disabled = false;
        document.getElementById('msg').innerText = "Ê≠¶Âô®„Çí„Çπ„Ç≠„É£„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ";
        switchCamera('P');
        updateUI();
    }

    function updateUI() {
        document.getElementById('p-fill').style.width = (php / pMax * 100) + "%";
        document.getElementById('p-hp-cur').innerText = Math.max(0, Math.floor(php));
        document.getElementById('p-hp-max').innerText = pMax;
        document.getElementById('p-atk-val').innerText = patk + buffAtk;
        document.getElementById('p-def-val').innerText = pdef + buffDef;
        document.getElementById('p-lv').innerText = lv;
        document.getElementById('stat-boost').innerText = ((lv-1)*3);
        document.getElementById('e-fill').style.width = (eMax > 0 ? (ehp / eMax * 100) : 0) + "%";
        document.getElementById('e-hp-cur').innerText = Math.max(0, Math.floor(ehp));
        document.getElementById('e-hp-max').innerText = eMax;
        document.getElementById('e-atk-val').innerText = eatk;
        document.getElementById('e-def-val').innerText = edef;
        document.getElementById('inv-count').innerText = `INVENTORY: ${inventory.length} / 5`;
    }

    function save() { localStorage.setItem('myth_coll_v8', JSON.stringify(coll)); }
    function showColl() {
        const render = (id, data, title) => {
            const el = document.getElementById(id);
            el.innerHTML = `<b>${title} (${Object.keys(data).length}/100)</b><br>`;
            Object.keys(data).sort((a,b)=>a-b).forEach(k => { 
                const item = data[k];
                const elem = item.e && item.e !== "‚ö™" ? item.e : "";
                el.innerHTML += `No.${k.toString().padStart(3,'0')} ${item.i}${item.n}${elem}<br>`; 
            });
        };
        render('w-coll', coll.weapons, "WEAPONS");
        render('m-coll', coll.monsters, "MONSTERS");
        render('i-coll', coll.items, "ITEMS");
        document.getElementById('coll-screen').style.display = "flex";
    }

    init();
</script>
</body>
</html>
